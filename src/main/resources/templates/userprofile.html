<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
   <head>
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <title>Your Profile</title>
      <link
         href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
         rel="stylesheet"
         integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC"
         crossorigin="anonymous">
      <link rel="preconnect" href="https://fonts.googleapis.com">
      <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
      <link
         href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&display=swap"
         rel="stylesheet">
      <link th:href="@{/css/style.css}" rel="stylesheet">
      <link th:href="@{/css/users.css}" rel="stylesheet">
      <link th:href="@{/css/addcontact.css}" rel="stylesheet">
      <link th:href="@{/css/showprofile.css}" rel="stylesheet">
      <link rel="stylesheet"
         href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
         integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA=="
         crossorigin="anonymous" referrerpolicy="no-referrer" />
         	<link rel="icon" type="image/x-icon" th:href="@{/img/favicon2.png}"  />
   </head>
   <body>
      <nav class="navbar navbar-expand-lg navbar-light bg-light" id="navbar">
       	<a class="navbar-brand" href="#" style="margin-left: 35px;">Effective Contact Organizer</a>
         <button class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarNav" aria-controls="navbarNav"
            aria-expanded="false" aria-label="Toggle navigation">
         <span class="navbar-toggler-icon"></span>
         </button>
         <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav" style="margin-left: auto; margin-right: 35px;">
               <li class="nav-item"><span class="nav-link"
                  th:text="${user.name}"></span></li>
               <li class="nav-item"><a class="nav-link" th:href="@{/logout}">Log
                  Out</a>
               </li>
            </ul>
         </div>
      </nav>
      <div class="sidebar" id="mysidebar">
         <div class="closebtn">
            <i onclick="togglebar()" class="fa-regular fa-circle-xmark"></i>
         </div>
         <a th:href="@{/users/profile}" class="item"><i
            class="fa-solid fa-user"></i>Your profile</a> <a
            th:href="@{/users/view-contacts/0}" class="item"><i
            class="fa-regular fa-id-card"></i>View Contacts</a> <a
            th:href="@{/users/add-contact}" class="item"><i
            class="fa-regular fa-pen-to-square"></i>Add Contact</a> <a th:href="@{/users/settings}"
            class="item"><i class="fa-solid fa-gear"></i>Settings</a> <a th:href="@{/logout}"
            class="item"><i class="fa-solid fa-right-from-bracket"></i> Log
         Out</a>
      </div>
      <div id="main">
         <i id="open" onclick="togglebar()" class="fa-solid fa-bars "></i>
         <div class="container">
            <form method="post" role="form" th:action="@{/users/update/profile}"
               th:object="${user}" enctype="multipart/form-data"  >
               <div class="row gutters">
                  <div class="col-xl-3 col-lg-3 col-md-12 col-sm-12 col-12">
                     <div class="card h-100">
                        <div class="card-body">
                           <div class="account-settings">
                              <div class="user-profile">
                                 <img th:src="@{'/userprofiles/'+*{imageurl}}"
                                    class="avatar img-circle img-thumbnail" alt="avatar"
                                    >
                                 <h6>Change Profile</h6>
                                 <input type="file" class="form-control mb-3" name="userprofile" >
                                 <h5 class="user-name" th:text="*{name}" ></h5>
                                 <h6 class="user-email" th:text="*{email}"></h6>
                              </div>
                              <div class="about mt-2">
                                 <h5>About</h5>
                                 <p th:utext="*{about}">I'm Yuki. Full Stack Designer I enjoy creating
                                    user-centric, delightful and human experiences.
                                 </p>
                              </div>
                           </div>
                        </div>
                     </div>
                  </div>
                  <div class="col-xl-9 col-lg-9 col-md-12 col-sm-12 col-12">
                     <div class="card h-100">
                        <div class="card-body">
                           <div class="row gutters">
                              <div
                                 class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12 mb-2">
                                 <h6 class="mb-2 text-primary">Personal Details</h6>
                              </div>
                              <div class="col-xl-6 col-lg-6 col-md-6 col-sm-6 col-12 mb-2">
                                 <div class="form-group">
                                    <label for="fullName" class="mb-1">Full Name</label> <input
                                       type="text" class="form-control" id="fullName" th:field="*{name}" 
                                       placeholder="Enter Full Name">
                                       	<p th:if="${#fields.hasErrors('name')}"
											class="text-danger" th:errors="*{name}"></p>
                                 </div>
                              </div>
                              <div class="col-xl-6 col-lg-6 col-md-6 col-sm-6 col-12 mb-2">
                                 <div class="form-group">
                                    <label for="eMail" class="mb-1">Email</label> <input
                                       type="email" class="form-control" id="eMail" th:field="*{email}" 
                                       placeholder="Enter email ID"  readonly>
                                       
                                        	<p th:if="${#fields.hasErrors('email')}"
											class="text-danger" th:errors="*{email}"></p>
                                 </div>
                              </div>
                              <div class="col-xl-6 col-lg-6 col-md-6 col-sm-6 col-12 mb-2">
                                 <div class="form-group">
                                    <label for="phone" class="mb-1">Phone</label> <input
                                        type="number" class="form-control" id="phone" th:field="*{phone}" 
                                       placeholder="Enter Phone Number">
                                   	<p th:if="${#fields.hasErrors('phone')}" class="text-danger"
									th:errors="*{phone}"></p>
                                 </div>
                              </div>
                              <div class="mt-3 mb-3">
                                 <label for="mytextarea" class="mb-1">About</label>
                                 <textarea id="mytextarea" class="form-control mt-3" rows="10"
                                    style="height: 100%;" th:field="*{about}"
                                    placeholder="Enter a brief description (e.g., relationship, important details, etc.)"></textarea>
                              </div>
                           </div>
                         <div class="text-center">
								<button type="submit" class="btn mt-3" id="updateButton"
									style="color: white; background:#007ae1;">Update</button>
							</div>

                        </div>
                     </div>
                  </div>
               </div>
            </form>
         </div>
      </div>
       <script>
        document.getElementById('updateButton').addEventListener('click', function() {
            // Call your update logic here

            // Reload the page
            location.reload();
        });
    </script>
      
      <Script type="text/javascript" th:src="@{/js/users.js}"></Script>
      <script
         src="http://cloud.tinymce.com/stable/tinymce.min.js?apiKey=vpi6vdpjb1isarbtfa33q1e9p157z7xz61b4cmn7rh4v5qf6"></script>
      <script>
         tinymce.init({
         	selector : '#mytextarea'
         });
      </script>
      
   </body>
</html>